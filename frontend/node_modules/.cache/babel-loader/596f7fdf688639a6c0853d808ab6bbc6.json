{"ast":null,"code":"import _asyncToGenerator from\"/home/deep/Imbesideyou/Imbesideyou_assignment/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createForOfIteratorHelper from\"/home/deep/Imbesideyou/Imbesideyou_assignment/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _regeneratorRuntime from\"/home/deep/Imbesideyou/Imbesideyou_assignment/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{FaceMesh,FACEMESH_TESSELATION,FACEMESH_LIPS,FACEMESH_LEFT_EYEBROW,FACEMESH_LEFT_IRIS,FACEMESH_LEFT_EYE,FACEMESH_RIGHT_EYE,FACEMESH_RIGHT_IRIS,FACEMESH_RIGHT_EYEBROW}from\"@mediapipe/face_mesh\";import{Camera}from\"@mediapipe/camera_utils/camera_utils\";import{drawConnectors}from'@mediapipe/drawing_utils/drawing_utils';export default function FaceMask(webcamRef,canvasRef){var faceMesh=new FaceMesh({locateFile:function locateFile(file){return\"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/\".concat(file);}});faceMesh.setOptions({maxNumFaces:5,refineLandmarks:true,minDetectionConfidence:0.5,minTrackingConfidence:0.5});faceMesh.onResults(function(results){var videoWidth=webcamRef.current.video.videoWidth;var videoHeight=webcamRef.current.video.videoHeight;// Set canvas width\ncanvasRef.current.width=videoWidth;canvasRef.current.height=videoHeight;var canvasElement=canvasRef.current;var canvasCtx=canvasElement.getContext(\"2d\");canvasCtx.save();canvasCtx.clearRect(0,0,canvasElement.width,canvasElement.height);canvasCtx.drawImage(results.image,0,0,canvasElement.width,canvasElement.height);if(results.multiFaceLandmarks){var _iterator=_createForOfIteratorHelper(results.multiFaceLandmarks),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var landmarks=_step.value;drawConnectors(canvasCtx,landmarks,FACEMESH_TESSELATION,{color:'#E8F5E9',lineWidth:0.5});drawConnectors(canvasCtx,landmarks,FACEMESH_RIGHT_EYE,{color:'aqua'});drawConnectors(canvasCtx,landmarks,FACEMESH_RIGHT_EYEBROW,{color:'aqua'});drawConnectors(canvasCtx,landmarks,FACEMESH_RIGHT_IRIS,{color:'aqua'});drawConnectors(canvasCtx,landmarks,FACEMESH_LEFT_EYE,{color:'aqua'});drawConnectors(canvasCtx,landmarks,FACEMESH_LEFT_EYEBROW,{color:'aqua'});drawConnectors(canvasCtx,landmarks,FACEMESH_LEFT_IRIS,{color:'aqua'});drawConnectors(canvasCtx,landmarks,FACEMESH_LIPS,{color:'aqua'});}}catch(err){_iterator.e(err);}finally{_iterator.f();}}canvasCtx.restore();});var camera=new Camera(webcamRef.current.video,{onFrame:function(){var _onFrame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return faceMesh.send({image:webcamRef.current.video});case 2:case\"end\":return _context.stop();}}},_callee);}));function onFrame(){return _onFrame.apply(this,arguments);}return onFrame;}(),width:1280,height:720});camera.start();}","map":{"version":3,"sources":["/home/deep/Imbesideyou/Imbesideyou_assignment/frontend/src/components/features/faceMask.js"],"names":["FaceMesh","FACEMESH_TESSELATION","FACEMESH_LIPS","FACEMESH_LEFT_EYEBROW","FACEMESH_LEFT_IRIS","FACEMESH_LEFT_EYE","FACEMESH_RIGHT_EYE","FACEMESH_RIGHT_IRIS","FACEMESH_RIGHT_EYEBROW","Camera","drawConnectors","FaceMask","webcamRef","canvasRef","faceMesh","locateFile","file","setOptions","maxNumFaces","refineLandmarks","minDetectionConfidence","minTrackingConfidence","onResults","results","videoWidth","current","video","videoHeight","width","height","canvasElement","canvasCtx","getContext","save","clearRect","drawImage","image","multiFaceLandmarks","landmarks","color","lineWidth","restore","camera","onFrame","send","start"],"mappings":"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","sourcesContent":["import { FaceMesh , FACEMESH_TESSELATION ,FACEMESH_LIPS ,FACEMESH_LEFT_EYEBROW, FACEMESH_LEFT_IRIS, FACEMESH_LEFT_EYE,FACEMESH_RIGHT_EYE , FACEMESH_RIGHT_IRIS,FACEMESH_RIGHT_EYEBROW} from \"@mediapipe/face_mesh\";\nimport { Camera } from \"@mediapipe/camera_utils/camera_utils\";\nimport {drawConnectors}  from '@mediapipe/drawing_utils/drawing_utils';\n\nexport default function FaceMask(webcamRef ,  canvasRef) {\n  const faceMesh = new FaceMesh({locateFile: (file) => {\n    return `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`;\n  }});\n  faceMesh.setOptions({\n    maxNumFaces: 5,\n    refineLandmarks: true,\n    minDetectionConfidence: 0.5,\n    minTrackingConfidence: 0.5\n  });\n  faceMesh.onResults((results) => {\n    const videoWidth = webcamRef.current.video.videoWidth;\n    const videoHeight = webcamRef.current.video.videoHeight;\n\n    // Set canvas width\n    canvasRef.current.width = videoWidth;\n    canvasRef.current.height = videoHeight;\n\n    const canvasElement = canvasRef.current;\n    const canvasCtx = canvasElement.getContext(\"2d\");\n\n    canvasCtx.save();\n    canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n    canvasCtx.drawImage(\n        results.image, 0, 0, canvasElement.width, canvasElement.height);\n    if (results.multiFaceLandmarks) {\n      for (const landmarks of results.multiFaceLandmarks) {\n        drawConnectors(canvasCtx, landmarks, FACEMESH_TESSELATION,\n                       {color: '#E8F5E9', lineWidth: 0.5});\n        drawConnectors(canvasCtx, landmarks, FACEMESH_RIGHT_EYE, {color: 'aqua'});\n        drawConnectors(canvasCtx, landmarks, FACEMESH_RIGHT_EYEBROW, {color: 'aqua'});\n        drawConnectors(canvasCtx, landmarks, FACEMESH_RIGHT_IRIS, {color: 'aqua'});\n        drawConnectors(canvasCtx, landmarks, FACEMESH_LEFT_EYE, {color: 'aqua'});\n        drawConnectors(canvasCtx, landmarks, FACEMESH_LEFT_EYEBROW, {color: 'aqua'});\n        drawConnectors(canvasCtx, landmarks, FACEMESH_LEFT_IRIS, {color: 'aqua'});\n        drawConnectors(canvasCtx, landmarks, FACEMESH_LIPS, {color: 'aqua'});\n      }\n    }\n    canvasCtx.restore();\n  });\n  \n  const camera = new Camera(webcamRef.current.video , {\n    onFrame: async () => {\n      await faceMesh.send({image: webcamRef.current.video });\n    },\n    width: 1280,\n    height: 720\n  });\n  camera.start();\n}\n\n"]},"metadata":{},"sourceType":"module"}